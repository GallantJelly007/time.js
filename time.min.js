class Time{timestamp=0;ticks=0;milliseconds=0;seconds=0;minutes=0;hours=0;decimalSeconds=0;decimalMinutes=0;decimalHours=0;day=1;dayOfWeek=4;month=1;year=1970;isLeap=!1;tz=Time.TIMEZONE.utc;static#t=[/^(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])$/,/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/,/^(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])$/,/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,/^(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])$/,/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])$/,/^(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])$/,/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/,/^([0-9]{4})-(0[1-9]|1[0-2])$/,/^([0-9]{4})(0[1-9]|1[0-2])$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])$/,/^([0-9]{4})(0[1-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[0-1])$/,/^([0-9]{4})(0[1-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,/^([0-9]{4})(0[1-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])$/,/^([0-9]{4})(0[1-9]|1[0-2])(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])([\+-]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.)([0-9]{3})Z?$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.)([0-9]{3})([\+-]{1})(0[0-9]|1[0-9]|2[0-3])Z?$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.)([0-9]{3})([\+-]{1})(0[0-9]|1[0-9]|2[0-3])([0-5][0-9])Z?$/,/^([0-9]{4})-(0[1-9]|1[0-2])-(0[0-9]|[1-2][0-9]|3[0-1])([T ]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\.)([0-9]{3})([\+-]{1})(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])Z?$/];static#e=[0,31,59,90,120,151,181,212,243,273,304,334,365];static#s=[0,31,60,91,121,152,182,213,244,274,305,335,366];static#i=new Map([["ru",["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]],["en",["January","February","March","April","May","June","July","August","September","October","November","December"]]]);static#a(t,e=!1){return[1,3,5,7,8,10,12].includes(t)?"(0[0-9]|1[0-9]|2[0-9]|3[0-1])":[4,6,9,11].includes(t)?"(0[0-9]|1[0-9]|2[0-9]|30)":e?"(0[0-9]|1[0-9]|2[0-9])":"(0[0-9]|1[0-9]|2[0-8])"}static TIMEZONE={minus_12:-12,minus_11:-11,minus_10:-10,minus_9_30:-9.5,minus_9:-9,minus_8_30:-8.5,minus_8:-8,minus_7:-7,minus_6:-6,minus_5:-5,minus_4_30:-4.5,minus_4:-4,minus_3_30:-3.5,minus_3:-3,minus_2_30:-2.5,minus_2:-2,minus_1:-1,utc:0,plus_0_30:.5,plus_1:1,plus_2:2,plus_2_30:2.5,plus_3:3,plus_3_30:3.5,plus_4:4,plus_4_30:4.5,plus_5:5,plus_5_30:5.5,plus_6:6,plus_6_30:6.5,plus_7:7,plus_7_30:7.5,plus_8:8,plus_8_30:8.5,plus_9:9,plus_9_30:9.5,plus_10:10,plus_10_30:10.5,plus_11:11,plus_11_30:11.5,plus_12:12,plus_12_45:12.75,plus_13:13,plus_13_45:13.75,plus_14:14};static defaultTz=Time.TIMEZONE.utc;static ISOFormats={TIME:"${Hm}",TIMECLN:"${H:m}",TIMESEC:"${HmS}",TIMESECCLN:"${H:m:S}",TIMESECTH:"${HmSTh}",TIMESECCLNTH:"${H:m:STh}",TIMESECTZ:"${HmSThTp}",TIMESECCLNTZ:"${H:m:SThTp}",DATEYMCLN:"${Y-M}",DATEYM:"${YM}",DATEYMDCLN:"${Y-M-D}",DATEYMD:"${YMD}",DATETIMEYMD:"${YMDHmS}",DATETIMECLN:"${Y-M-DTH:m:S}",DATETIMETH:"${YMDTHmSTh}",DATETIMECLNTH:"${Y-M-DTH:m:STh}",DATETIMETZ:"${YMDTHmSThTp}",DATETIMECLNTZCLN:"${Y-M-DTH:m:STz}",DATETIMEMSCLN:"${Y-M-DTH:m:S.s}",DATETIMEMSCLNTH:"${Y-M-DTH:m:S.sTh}",DATETIMEMSCLNTZ:"${Y-M-DTH:m:S.sThTp}",DATETIMEMSCLNTZCLN:"${Y-M-DTH:m:S.sTz}"};static isLeapYear(t){if(t<1||t>9999)throw console.log(t),new Error("Year out of range Exception");return t%4==0&&(t%100!=0||t%400==0)}static setDefaultTz(t){for(let e in Time.TIMEZONE)if(Time.TIMEZONE[e]==t)return Time.defaultTz=Time.TIMEZONE[e],!0;return!1}static getMonthDayCount(t,e=!1){return!(t<1||t>12)&&[31,e?29:28,31,30,31,30,31,31,30,31,30,31][t-1]}static getMonthString(t=!1,e=1,s="ru"){if(e<1||e>12)throw new Error("Month out of range exception");if(Time.#i.has(s)){if(t){return Time.#i.get(s)[e-1]}return Time.#i.get(s)}}static timestampToTicks(t){return t+621355968e5}static ticksToTimestamp(t){return t-621355968e5}static create(t=1970,e=1,s=1,i=0,a=0,h=0,r=0,n=Time.TIMEZONE.utc){let m=new Time;return m.#h({year:t,month:e,day:s,hours:i,minutes:a,seconds:h,milliseconds:r,timezone:n}),m}static leapYearsBeetwen(t,e){if(t<1||t>9999||e<1||e>9999)throw new Error("Param year out of range Exception");let s=e-t;return Math.floor(s/4-s/100+s/400)}constructor(t,e=null){if("string"==typeof t)this.#r(t);else{if("number"==typeof t?this.timestamp=t:t instanceof Date?"undefined"==typeof window?this.timestamp=t.getTime():this.timestamp=t.getTime()-60*t.getTimezoneOffset()*1e3:this.timestamp=t instanceof Time?t.ticks:(new Date).getTime(),null!==e){let t=!1;for(let s in Time.TIMEZONE)if(Time.TIMEZONE[s]==e){this.tz=Time.TIMEZONE[s],t=!0;break}t||(this.tz=Time.defaultTz)}else this.tz=Time.defaultTz;this.timestamp+=3600*this.tz*1e3,this.#n()}}#r(t){let e={year:1970,month:1,day:1,hours:0,minutes:0,seconds:0,milliseconds:0,tzHours:0,tzMinutes:0},s=Time.TIMEZONE.utc,i=["year","month","day","hours","minutes","seconds","milliseconds","tzHours","tzMinutes"];for(let a of Time.#t){let h=t.match(a);if(h){h.shift();let t=0,a=h.length,r=h.shift(),n=!1;for(let s=0,m=0;s<a;s++)0==s&&4!=r.length&&(m+=3),/^([T ]{1})$/.test(r)?r=h.shift():/^(\.)$/.test(r)?(n=!0,r=h.shift()):/^([\+-]{1})$/.test(r)?(m+=n?0:1,t="-"==r?-1:1,r=h.shift()):(e[i[m]]=Number(r),r=h.shift(),m++);s=(e.tzHours+e.tzMinutes/60)*t;break}}console.log(e),this.#h({year:e.year,month:e.month,day:e.day,hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds,timezone:s})}#n(){this.ticks=Time.timestampToTicks(this.timestamp);let t=this.ticks/864e5,e=t/1461-t/36524+t/146097+59/365,s=(this.ticks/864e5-e)/365;this.year=Math.trunc(s)+1;let i=Math.trunc((this.ticks-864e5*Math.floor(e)-365*(this.year-1)*864e5)/864e5);this.isLeap=Time.isLeapYear(this.year);let a=this.isLeap?Time.#s:Time.#e,h=0,r=0;for(let t=0;t<a.length;t++)if(i<=a[t+1]){h=t+1,r=Math.floor(i-a[t])+1;break}let n=!1;r>Time.getMonthDayCount(h,this.isLeap)&&(12==h?(this.year++,h=1,this.isLeap=Time.isLeapYear(this.year),r=1):(h++,r=1),n=!0),r-1==0&&!this.isLeap&&!n&&this.ticks/864e5>1&&(h-1==0?(h=12,this.year+=1!=this.year?-1:0,this.isLeap=Time.isLeapYear(this.year),r=Time.getMonthDayCount(h,this.isLeap)):(h--,r=Time.getMonthDayCount(h,this.isLeap))),this.month=h,this.day=r,this.decimalHours=this.ticks%864e5/36e5,this.decimalMinutes=this.ticks%36e5/6e4,this.decimalSeconds=this.ticks%6e4/1e3,this.hours=Math.trunc(this.decimalHours),this.minutes=Math.trunc(this.decimalMinutes),this.seconds=Math.trunc(this.decimalSeconds),this.milliseconds=this.ticks%1e3,this.dayOfWeek=Math.abs(t%7-6<=0?t%7-6+7:t%7-6)}#h(t={}){let e=1,s=t.hasOwnProperty("year")&&"number"==typeof t.year&&/^([1-9]|[1-9][0-9]{1,3})$/.test(t.year)?t.year:this.year,i=t.hasOwnProperty("month")&&"number"==typeof t.month&&/^([1-9]|1[0-2])$/.test(t.month)?t.month:this.month,a=t.hasOwnProperty("day")&&"number"==typeof t.day&&/^([0-9]|[1-2][0-9]|3[0-1])$/.test(t.day)?t.day:this.day,h=t.hasOwnProperty("hours")&&"number"==typeof t.hours&&/^([0-9]|1[0-9]|2[0-3])$/.test(t.hours)?t.hours:this.hours,r=t.hasOwnProperty("minutes")&&"number"==typeof t.minutes&&/^([0-9]|[0-5][0-9])$/.test(t.minutes)?t.minutes:this.minutes,n=t.hasOwnProperty("seconds")&&"number"==typeof t.seconds&&/^([0-9]|[0-5][0-9])$/.test(t.seconds)?t.seconds:this.seconds,m=t.hasOwnProperty("milliseconds")&&"number"==typeof t.milliseconds&&/^([0-9]|[1-9][0-9]|[1-9][0-9][0-9])$/.test(t.milliseconds)?t.milliseconds:this.milliseconds;if(t.hasOwnProperty("timezone")&&"number"==typeof t.timezone)for(let e in Time.TIMEZONE)if(Time.TIMEZONE[e]==t.timezone){this.tz=Time.TIMEZONE[e];break}if(s>=1&&s<=9999&&i>=1&&i<=12){this.year=s,this.month=i;let t=Time.isLeapYear(s)?Time.#s:Time.#e;if(a>=1&&a<=t[i]-t[i-1]){this.day=a;let h=s-1;e=365*h+Math.floor(h/4)-Math.floor(h/100)+Math.floor(h/400)+t[i-1]+a-1}}this.dayOfWeek=Math.abs(e%7-6<=0?e%7-6+7:e%7-6);let o=36e5*h+6e4*r+1e3*n+m;if(this.decimalHours=o/36e5,this.decimalMinutes=(6e4*r+1e3*n+m)/6e4,this.decimalSeconds=(1e3*n+m)/1e3,this.hours=Math.trunc(this.decimalHours),this.minutes=Math.trunc(this.decimalMinutes),this.seconds=Math.trunc(this.decimalSeconds),this.milliseconds=m,o>Number.MAX_SAFE_INTEGER||o<Number.MIN_SAFE_INTEGER)throw new Error("Out of range number value when calc ticks in time");this.isLeap=this.year%4==0&&(this.year%100!=0||this.year%400==0),this.ticks=Math.trunc(24*e*3600*1e3)+o,this.ticks+=this.ticks<Math.abs(36e5*this.tz)&&this.tz<0?-this.ticks:36e5*this.tz,this.timestamp=Time.ticksToTimestamp(this.ticks)}#m(t=null){return[31,(t=null!==t?t:this.isLeap)?29:28,31,30,31,30,31,31,30,31,30,31]}setTz(t,e=!0){let s=!1;for(let i in Time.TIMEZONE)if(Time.TIMEZONE[i]==t){if(e){let t=Time.TIMEZONE[i]-this.tz;this.ticks+=3600*t*1e3}this.tz=Time.TIMEZONE[i],s=!0;break}return s&&e&&this.#n(),this}toISO(t=null){if(null!=t)for(let e in Time.ISOFormats)if(t==Time.ISOFormats[e])return this.format(Time.ISOFormats[e]);return this.format(Time.ISOFormats.DATETIMEMSCLNTZ)}getMonthString(t="ru"){if(Time.#i.has(t)){return Time.#i.get(t)[this.month-1]}}getMonthDayCount(){return this.#m(this.isLeap)[this.month-1]}add(t){let e=0;t instanceof Time?e=t.ticks:(t instanceof Date||"string"==typeof t||"number"==typeof t)&&(e=new Time(t).ticks);let s=this.ticks+e+(Time.isLeapYear(this.year)?316224e5:31536e6)+864e5;return s=s<0?0:s>315537897599999?315537897599999:s,this.timestamp=Time.ticksToTimestamp(s),this.#n(),this}diff(t){let e=0;t instanceof Time?e=t.ticks:(t instanceof Date||"string"==typeof t||"number"==typeof t)&&(e=new Time(t).ticks);let s=this.ticks-e-(Time.isLeapYear(this.year-1)?316224e5:31536e6)-864e5;return s=s<0?0:s>315537897599999?315537897599999:s,this.timestamp=Time.ticksToTimestamp(s),this.#n(),this}addSeconds(t){return this.ticks+=1e3*t,this.#n(),this}addMinutes(t){return this.ticks+=60*t*1e3,this.#n(),this}addHours(t){return this.ticks+=3600*t*1e3,this.#n(),this}addYear(t){return this.year+=t,this.#h(),this}addMonth(t){let e=this.month+t,s=e<this.month,i=e<this.month?this.month-2:this.month-1,a=this.year;for(let e=Math.abs(t);e>0;e--)i>11&&(a++,i=0),i<0&&(a--,i=11),i+=s?-1:1;return this.month=i+1,this.year=a,this.#h(),this}addDay(t){return this.ticks+=24*t*3600*1e3,this.#n(),this}setTime(t=null,e=null,s=null,i=null){let a=!1;if(/^([0-9]|1[0-9]|2[0-3])$/.test(t)){let e=Number(t)-this.hours;this.ticks+=3600*e*1e3,a=!0}if(/^([0-9]|[0-5][0-9])$/.test(e)){let t=Number(e)-this.minutes;this.ticks+=60*t*1e3,a=!0}if(/^([0-9]|[0-5][0-9])$/.test(s)){let t=Number(s)-this.seconds;this.ticks+=1e3*t,a=!0}if(/^([0-9]|[1-9][0-9]|[1-9][0-9][0-9])$/.test(i)){let t=Number(i)-this.milliseconds;this.ticks+=t,a=!0}return a&&this.#n(),this}setDate(t=null,e=null,s=null){let i=!1;return/^([1-9]|[1-9][0-9]{1,3})$/.test(s)&&"number"==typeof s&&(this.year=s,i=!0),/^([1-9]|1[0-2])$/.test(e)&&"number"==typeof e&&(this.month=e,i=!0),Time.#a(this.month,Time.isLeapYear(this.year)).test(t)&&"number"==typeof t&&(this.day=t,i=!0),i&&this.#h(),this}startDay(){let t=3600*this.hours*1e3+60*this.minutes*1e3+1e3*this.seconds+this.milliseconds;return this.ticks-=t,this.#n(),this}endDay(){let t=3600*(23-this.hours)*1e3+60*(59-this.minutes)*1e3+1e3*(59-this.seconds)+(999-this.milliseconds);return this.ticks+=t,this.#n(),this}format(t){let e=t.match(/(\$\{[^\{\}]+\})/g);for(;e;){let s=e.shift();s=s.replace(/[\{\}\$]/g,""),s=s.replace(/AP/g,this.hours>12?(this.hours-12).toString().padStart(2,"0"):this.hours.toString().padStart(2,"0")),s=s.replace(/H/g,this.hours.toString().padStart(2,"0")),s=s.replace(/m/g,this.minutes.toString().padStart(2,"0")),s=s.replace(/S/g,this.seconds.toString().padStart(2,"0")),s=s.replace(/Y/g,this.year),s=s.replace(/y/g,this.year.toString().slice(2)),s=s.replace(/D/g,this.day.toString().padStart(2,"0")),s=s.replace(/M/g,this.month.toString().padStart(2,"0")),s=s.replace(/s/g,this.milliseconds.toString().padStart(2,"0")),s=s.replace(/Th/g,""+(this.tz>=0?"+":"-")+Math.abs(Math.floor(this.tz)).toString().padStart(2,"0")),s=s.replace(/Tp/g,Math.abs(60*this.tz%60).toString().padStart(2,"0")),s=s.replace(/Tz/g,""+(this.tz>=0?"+":"-")+Math.abs(Math.floor(this.tz)).toString().padStart(2,"0")+":"+Math.abs(60*this.tz%60).toString().padStart(2,"0")),e=(t=t.replace(/(\$\{[^\{\}]+\})/,s)).match(/(\$\{[^\{\}]+\})/g)}return t}valueOf(){return this.ticks}}"undefined"==typeof window&&(module.exports=Time);export default Time;